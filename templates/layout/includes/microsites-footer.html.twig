{#
/**
 * @file
 * Theme override to display a region.
 *
 * Available variables:
 * - content: The content for this region, typically blocks.
 * - attributes: HTML attributes for the region <div>.
 * - region: The name of the region variable as defined in the theme's
 *   .info.yml file.
 *
 * @see template_preprocess_region()
 */
#}

{% set microsite = microsites.group.id %}
{% set microsite_fields_check = microsites.group.entity %}

{% if microsite_fields_check.lgms_footer_banner.value %}
  {% set microsite_footer_banner = drupal_field('lgms_footer_banner', 'group', microsite, 'microsite') %}
{% endif %}

{% if microsite_fields_check.lgms_footer_text_block_1.value %}
  {% set microsite_footer_text_block_1 = drupal_field('lgms_footer_text_block_1', 'group', microsite, 'microsite') %}
{% endif %}

{% if microsite_fields_check.lgms_footer_text_block_2.value %}
  {% set microsite_footer_text_block_2 = drupal_field('lgms_footer_text_block_2', 'group', microsite, 'microsite') %}
{% endif %}

{% if microsite_fields_check.lgms_footer_text_block_3.value %}
  {% set microsite_footer_text_block_3 = drupal_field('lgms_footer_text_block_3', 'group', microsite, 'microsite') %}
{% endif %}

{% if microsite_fields_check.lgms_footer_text_block_4.value %}
  {% set microsite_footer_text_block_4 = drupal_field('lgms_footer_text_block_4', 'group', microsite, 'microsite') %}
{% endif %}

{% if microsite_fields_check.lgms_footer_logos.value %}
  {% set microsite_footer_logos = drupal_field('lgms_footer_logos', 'group', microsite, 'microsite') %}
{% endif %}

{% if microsite_fields_check.lgms_housekeepting_menu.value %}
  {% set microsite_footer_housekeeping = drupal_field('lgms_housekeepting_menu', 'group', microsite, 'microsite') %}
{% endif %}

{% if microsite_fields_check.lgms_copyright.value == 1 %}
  {% set microsite_footer_copyright = 'Â©Copyright ' ~ "now"|date("Y") %}
{% endif %}

{% if microsite_fields_check.lgms_powered_by.value == 1 %}
  {% set powered_by_message %}
    Powered by <a href="https://localgovdrupal.org">LocalGov Drupal</a>
  {% endset %}
  {% set microsite_footer_powered_by = powered_by_message %}
{% endif %}

{% set footer_attributes = create_attribute() %}

{%
  set footer_classes = [
    'region-microsites-footer',
    microsites.footer.width.content_centered ? 'lgd-container' : '',
  ]
%}

{{ attach_library('localgov_microsites_base/footer') }}

{% if microsite_footer_banner %}
  <div class="microsite-footer__banner">
    {{ microsite_footer_banner }}
  </div>
{% endif %}

<div{{ footer_attributes.addClass(footer_classes) }}>

{% if microsites.footer.width.full_width_content_contained %}
  <div class="lgd-container padding-horizontal">
{% endif %}
  <div class="lgd-region__inner lgd-region__inner--{{ region|clean_class }}">
    {# Begin Footer text blocks #}
    <div class="lgd-row">
      {% if microsite_footer_text_block_1 %}
        <div class="lgd-row__one-quarter">
          <div class="microsite-footer__block microsite-footer__text-block microsite-footer__text-block--1">
            {{ microsite_footer_text_block_1 }}
          </div>
        </div>
      {% endif %}
      {% if microsite_footer_text_block_2 %}
        <div class="lgd-row__one-quarter">
          <div class="microsite-footer__block microsite-footer__text-block microsite-footer__text-block--2">
            {{ microsite_footer_text_block_2 }}
          </div>
        </div>
      {% endif %}
      {% if microsite_footer_text_block_3 %}
        <div class="lgd-row__one-quarter">
          <div class="microsite-footer__block microsite-footer__text-block microsite-footer__text-block--3">
            {{ microsite_footer_text_block_3 }}
          </div>
        </div>
      {% endif %}
      {% if microsite_footer_text_block_4 %}
        <div class="lgd-row__one-quarter">
          <div class="microsite-footer__block microsite-footer__text-block microsite-footer__text-block--4">
            {{ microsite_footer_text_block_4 }}
          </div>
        </div>
      {% endif %}
    </div> {# End Footer text blocks #}

    {# Begin Footer Logos #}
    <div class="lgd-row">
      {% if microsite_footer_logos %}
        <div class="lgd-row__full">
          <div class="microsite-footer__block microsite-footer__logos">
            {{ microsite_footer_logos }}
          </div>
        </div>
      {% endif %}
    </div> 
    {# End Footer Logos #}

    {# Begin Footer Housekeeping Menu #}
    <div class="lgd-row">
      {% if microsite_footer_housekeeping %}
        <div class="lgd-row__full">
          <div class="microsite-footer__block microsite-footer__housekeeping">
            {{ microsite_footer_housekeeping }}
          </div>
        </div>
      {% endif %}
    </div> 
    {# End Footer Housekeeping Menu #}

    {# Begin Footer Copyright Notice #}
    <div class="lgd-row">
      {% if microsite_footer_copyright %}
        <div class="lgd-row__full">
          <div class="microsite-footer__block microsite-footer__copyright">
            {{ microsite_footer_copyright }}
          </div>
        </div>
      {% endif %}
    </div> 
    {# End Footer Copyright Notice #}

    {# Begin Footer Powered By #}
    <div class="lgd-row">
      {% if microsite_footer_powered_by %}
        <div class="lgd-row__full">
          <div class="microsite-footer__block microsite-footer__powered_by">
            {{ microsite_footer_powered_by }}
          </div>
        </div>
      {% endif %}
    </div> 
    {# End Footer Powered By #}
  </div>
{% if microsites.footer.width.full_width_content_contained %}
  </div> 
{% endif %}
</div>
